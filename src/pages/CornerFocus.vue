<template>
  <Squiggly />
  <div
    class="container"
    @mousemove="onMouseMove"
    @touchmove.prevent="onTouchMove"
  >
    <svg
      ref="wordRef"
      class="word"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 100 80"
    >
      <path
        d="m23.5268 24.6659 3.6873 7.1088 3.7312-7.1088h.4828l-4.0165 7.5167v4.6032h-.3951v-4.6032L23 24.6659h.5268ZM34.8857 32.4573v-.3496c0-.6604.0829-1.2653.2488-1.8147.1707-.5494.4072-1.0238.7096-1.4234.3073-.3996.6731-.7075 1.0974-.924.4244-.222.8926-.3329 1.4047-.3329.517 0 .9877.1109 1.412.3329.4243.2165.7902.5244 1.0974.924.3073.3996.5439.874.7097 1.4234.1658.5494.2487 1.1543.2487 1.8147v.3496c0 .6604-.0829 1.2652-.2487 1.8146-.1658.5494-.4024 1.0239-.7097 1.4234-.3024.3996-.6657.7104-1.0901.9323-.4243.2165-.8925.3247-1.4047.3247-.517 0-.9876-.1082-1.412-.3247-.4243-.2219-.7901-.5327-1.0974-.9323-.3072-.3995-.5462-.874-.7169-1.4234-.1659-.5494-.2488-1.1542-.2488-1.8146Zm.3951-.3496v.3496c0 .5383.0683 1.0516.2048 1.5399.1415.4828.3439.9129.6073 1.2903.2633.3773.5852.6742.9657.8906.3804.2165.8145.3247 1.3022.3247.4829 0 .9121-.1082 1.2877-.3247.3804-.2164.7023-.5133.9657-.8906.2634-.3774.4634-.8075.5999-1.2903.1366-.4883.2049-1.0016.2049-1.5399v-.3496c0-.5272-.0683-1.0322-.2049-1.515-.1365-.4828-.339-.9129-.6072-1.2902-.2634-.383-.5853-.6854-.9657-.9074-.3805-.2219-.8121-.3329-1.295-.3329-.4828 0-.9145.111-1.2949.3329-.3756.222-.6975.5244-.9658.9074-.2633.3773-.4633.8074-.5999 1.2902-.1365.4828-.2048.9878-.2048 1.515ZM52.039 35.3269v-6.4573h.3696l.0328 6.4179L53.5 37.5H53l-.961-2.1731Zm.0658-2.0622.3366-.0166c0 .5327-.061 1.0238-.1829 1.4733-.122.4495-.3097.8435-.5634 1.1821-.2536.3329-.5779.591-.973.7741-.3951.1831-.8657.2747-1.412.2747-.3853 0-.7389-.0611-1.0608-.1831-.3171-.1277-.5926-.3275-.8268-.5994-.2292-.2719-.4072-.6271-.534-1.0655-.122-.4439-.1829-.9794-.1829-1.6065v-5.7187h.395v5.7353c0 .5494.0537 1.0156.161 1.3985.1122.3829.2658.6909.4609.924.2.233.4317.4023.695.5077.2683.1055.5609.1582.878.1582.7121 0 1.273-.1554 1.6827-.4662.4097-.3107.6999-.7131.8706-1.207.1707-.4994.256-1.021.256-1.5649ZM58.145 24.5v.9068l-.4024.0166V24.5h.4024ZM63.8193 29.3441v7.4417h-.395V27.5h.395v1.8441ZM67.5 28.2447l-.0439.3996c-.078-.0111-.161-.0222-.2487-.0333-.083-.0111-.1708-.0167-.2634-.0167-.4439 0-.8341.1027-1.1706.308-.3317.2054-.6097.4884-.834.8491-.2195.3607-1.0884 1.3453-1.2005 1.8169-.1073.4662 0-.1432 0 .3895l-.2634.025c0-.6326-.0926-.4501.0245-.9828.3193-.3602.9098-1.2486 1.2345-1.6065.3247-.358.5487-.6993.9145-.9157.3707-.2164.8024-.3246 1.295-.3246.1219 0 .2292.0083.3219.0249.0927.0167.1707.0389.2341.0666ZM75.1515 37.0189c-1.1515 0-1.9461-.1748-2.3656-.3913-.4194-.2219-.7877-.5327-1.1047-.9323-.317-.3995-.5658-.8712-.7462-1.415-.1756-.5494-.2634-1.1515-.2634-1.8064v-.3662c0-.6604.0853-1.2625.2561-1.8064.1755-.5493.4145-1.0238.7169-1.4234.3073-.4051.6609-.7158 1.0609-.9323.3999-.222.8291-.3329 1.2876-.3329.439 0 1.8413.0943 2.2071.283.3658.1831.6829.4439.9511.7824.2732.3386.4829.7437.6292 1.2154.1463.4717.1146 1.6759.1146 2.2475v.5244h-6.9674l.0073-.4495H77.5v-.1082c0-.6049-.0024-1.8424-.217-2.3474-.2146-.5106-.517-.9212-.9072-1.232-.3902-.3108-.8511-.4661-1.3827-.4661-.439 0-1.8389.1054-2.1998.3163-.3561.2109-.6634.5022-.9219.874-.2585.3663-.4584.7936-.5999 1.2819-.1366.4884-.2048 1.0128-.2048 1.5733v.3662c0 .5605.078 1.0849.2341 1.5733.1561.4883.3731.9184.6511 1.2902.278.3663.6024.6548.973.8657.3756.2053 1.7926.3746 2.2266.3746.4536 0 .8755-.086 1.2657-.258.3951-.1721.756-.4995 1.0828-.9823l.278.2248c-.1756.283-.3877.5355-.6365.7575-.2439.2164-.5316.3884-.8633.516-.3268.1221-.7023.1832-1.1267.1832ZM38.0755 52.4517c0-.2719-.0658-1.3707-.1975-1.6481-.1317-.2831-.3707-.5467-.717-.7908-.3463-.2442-.8462-.4468-1.4998-.6077-.4438-.111-.834-.2331-1.1706-.3662-.3316-.1332-.6096-.2914-.834-.4745-.2244-.1887-.3926-.4162-.5048-.6826-.1122-.2664-.1683-.5827-.1683-.9489 0-.3164.278-1.4928.3951-1.7647.278-.6459.2756-.6604.5048-.8657.2292-.2109.5073-.3746.834-.4912.3268-.1165.6975-.1748 1.1121-.1748.5901 0 1.095.1082 1.5144.3247.4243.2164.7487.5188.973.9073.2293.3829.3439.8296.3439 1.3402h-.4024c0-.3718-.0951-.7187-.2853-1.0405-.1853-.3219-.4585-.5827-.8194-.7825-.3609-.1998-.8023-.2997-1.3242-.2997-.5317 0-.9633.0916-1.295.2747-.3316.1831-.5755.4134-.7316.6909-.1512.2775-.4243 1.5816-.4243 1.8646 0 .2331.0293.4495.0878.6493.0585.1942.1707.3774.3365.5494.1707.1665.4146.3246.7316.4745.3171.1498.7316.2913 1.2438.4245.6292.1609 1.1413.3551 1.5363.5827.3951.2275.6853.5077.8707.8407.1902.3274.2853.727.2853 1.1987 0 .3496-.0659 1.4928-.1975 1.7813-.1269.2886-.3122.5383-.5561.7492-.239.2109-.5316.3746-.8779.4911-.3414.111-.7243.1665-1.1486.1665-.639 0-1.1804-.111-1.6242-.333-.439-.2275-.7731-.5272-1.0023-.899-.2244-.3773-.3365-.7852-.3365-1.2236h.395c.0342.5161.1829.9212.4463 1.2153.2683.2886.5926.4939.9731.616.3853.1165.7681.1748 1.1486.1748.5219 0 .9584-.0943 1.3096-.283.356-.1887.6243-.4301.8047-.7242.1805-.2997.2707-.6049.2707-.9157ZM48.6224 52.1437l-.0878-6.1603c0-.4995-.0951-.9268-.2853-1.282-.1854-.3551-.4585-.627-.8194-.8157-.3561-.1887-.7926-.283-1.3096-.283-.478 0-.9097.0971-1.295.2913-.3804.1887-.6828.4495-.9072.7825-.2194.3329-.3292.7075-.3292 1.1237l-.3951-.0166c0-.3496.0708-.6826.2122-.9989.1463-.3163.3487-.5966.6073-.8407.2633-.2442.573-.4357.9291-.5744.3609-.1443.7535-.2164 1.1779-.2164.5511 0 1.0364.1054 1.4559.3163.4243.2109.756.5272.995.9489.239.4218.3585.949.3585 1.5816l.0878 6.0189c0 .3218.017.6465.0512.9739.039.3274.0902.5827.1536.7658L49.5 55h-.4313c-.0488-.2164-.3854-1.6437-.4097-1.9489-.0244-.3108-.0366-.6132-.0366-.9074Zm.1756-3.3379.0146.4578h-2.0631c-.5122 0-.9706.0583-1.3755.1748-.4048.111-.7486.2692-1.0315.4745-.2829.2053-.5.4495-.6512.7325-.1512.283-.2268.5966-.2268.9406 0 .3607.0854.6909.2561.9906.1756.2997.417.5383.7243.7159.3073.1775.6609.2663 1.0608.2663.5561 0 1.0487-.1026 1.4779-.308.4292-.2108.7926-.505 1.0901-.8823.2975-.3774.5243-.8241.6804-1.3402l.1756.4162c-.0927.3108-.2317.6188-.4171.924-.1804.2997-.4121.5743-.695.8241-.2829.2441-.617.4411-1.0023.591-.3804.1443-.817.2164-1.3096.2164-.4926 0-.9218-.1027-1.2876-.308-.3658-.2109-.6487-.4994-.8487-.8657-.1999-.3718-.2999-.7963-.2999-1.2736 0-.3995.0829-.7658.2487-1.0988.1659-.3385.4048-.6298.717-.874.317-.2497.7023-.4412 1.1559-.5743.4536-.1332.9658-.1998 1.5364-.1998h2.0705ZM55.5624 53.8335h-.3951V43.545c0-.5772.083-1.0627.2488-1.4568.1658-.3995.4024-.702.7097-.9073.3121-.2053.6828-.308 1.112-.308.1512 0 .3073.0111.4682.0333.161.0167.3171.0527.4683.1082l-.0586.4329c-.1365-.0444-.2658-.0749-.3877-.0916-.122-.0222-.2829-.0333-.4829-.0333-.3463 0-.6462.0888-.8999.2664-.2487.172-.4414.4245-.5779.7575-.1366.3274-.2049.727-.2049 1.1987v10.2885Zm2.0924-9.0066v.4578H53v-.5327l4.6548.0749ZM64.9607 54c-.4829 0-.9341-.1082-1.3535-.3246-.4195-.222-.7877-.5328-1.1047-.9323-.3171-.3996-.5658-.8713-.7463-1.4151-.1756-.5494-.2634-1.1515-.2634-1.8063v-.3663c0-.6604.0854-1.2625.2561-1.8063.1756-.5494.4146-1.0239.717-1.4235.3072-.4051.6609-.7158 1.0608-.9323.3999-.2219.8292-.3329 1.2876-.3329.439 0 .8414.0943 1.2072.283.3658.1831.6828.444.9511.7825.2731.3385.4828.7436.6292 1.2153.1463.4717.2194.9933.2194 1.5649v.5244h-6.0723v-.4495h5.6773v-.1082c0-.6049-.1073-1.1598-.3219-1.6648-.2146-.5105-.517-.9212-.9072-1.232-.3902-.3107-.8511-.4661-1.3828-.4661-.4389 0-.8389.1054-1.1998.3163-.3561.2109-.6633.5022-.9218.874-.2585.3663-.4585.7936-.5999 1.2819-.1366.4884-.2049 1.0128-.2049 1.5733v.3663c0 .5604.078 1.0849.2341 1.5732.1561.4884.3731.9184.6511 1.2902.2781.3663.6024.6549.9731.8657.3755.2054.7804.308 1.2145.308.4536 0 .8754-.086 1.2656-.258.3951-.172.756-.4995 1.0828-.9823l.278.2248c-.1756.283-.3877.5355-.6365.7575-.2438.2164-.5316.3884-.8633.5161-.3268.1221-.7023.1831-1.1266.1831Z"
      />
      <path
        d="m23.5268 24.6659 3.6873 7.1088 3.7312-7.1088h.4828l-4.0165 7.5167v4.6032h-.3951v-4.6032L23 24.6659h.5268ZM34.8857 32.4573v-.3496c0-.6604.0829-1.2653.2488-1.8147.1707-.5494.4072-1.0238.7096-1.4234.3073-.3996.6731-.7075 1.0974-.924.4244-.222.8926-.3329 1.4047-.3329.517 0 .9877.1109 1.412.3329.4243.2165.7902.5244 1.0974.924.3073.3996.5439.874.7097 1.4234.1658.5494.2487 1.1543.2487 1.8147v.3496c0 .6604-.0829 1.2652-.2487 1.8146-.1658.5494-.4024 1.0239-.7097 1.4234-.3024.3996-.6657.7104-1.0901.9323-.4243.2165-.8925.3247-1.4047.3247-.517 0-.9876-.1082-1.412-.3247-.4243-.2219-.7901-.5327-1.0974-.9323-.3072-.3995-.5462-.874-.7169-1.4234-.1659-.5494-.2488-1.1542-.2488-1.8146Zm.3951-.3496v.3496c0 .5383.0683 1.0516.2048 1.5399.1415.4828.3439.9129.6073 1.2903.2633.3773.5852.6742.9657.8906.3804.2165.8145.3247 1.3022.3247.4829 0 .9121-.1082 1.2877-.3247.3804-.2164.7023-.5133.9657-.8906.2634-.3774.4634-.8075.5999-1.2903.1366-.4883.2049-1.0016.2049-1.5399v-.3496c0-.5272-.0683-1.0322-.2049-1.515-.1365-.4828-.339-.9129-.6072-1.2902-.2634-.383-.5853-.6854-.9657-.9074-.3805-.2219-.8121-.3329-1.295-.3329-.4828 0-.9145.111-1.2949.3329-.3756.222-.6975.5244-.9658.9074-.2633.3773-.4633.8074-.5999 1.2902-.1365.4828-.2048.9878-.2048 1.515ZM52.039 35.3269v-6.4573h.3696l.0328 6.4179L53.5 37.5H53l-.961-2.1731Zm.0658-2.0622.3366-.0166c0 .5327-.061 1.0238-.1829 1.4733-.122.4495-.3097.8435-.5634 1.1821-.2536.3329-.5779.591-.973.7741-.3951.1831-.8657.2747-1.412.2747-.3853 0-.7389-.0611-1.0608-.1831-.3171-.1277-.5926-.3275-.8268-.5994-.2292-.2719-.4072-.6271-.534-1.0655-.122-.4439-.1829-.9794-.1829-1.6065v-5.7187h.395v5.7353c0 .5494.0537 1.0156.161 1.3985.1122.3829.2658.6909.4609.924.2.233.4317.4023.695.5077.2683.1055.5609.1582.878.1582.7121 0 1.273-.1554 1.6827-.4662.4097-.3107.6999-.7131.8706-1.207.1707-.4994.256-1.021.256-1.5649ZM58.145 24.5v.9068l-.4024.0166V24.5h.4024ZM63.8193 29.3441v7.4417h-.395V27.5h.395v1.8441ZM67.5 28.2447l-.0439.3996c-.078-.0111-.161-.0222-.2487-.0333-.083-.0111-.1708-.0167-.2634-.0167-.4439 0-.8341.1027-1.1706.308-.3317.2054-.6097.4884-.834.8491-.2195.3607-1.0884 1.3453-1.2005 1.8169-.1073.4662 0-.1432 0 .3895l-.2634.025c0-.6326-.0926-.4501.0245-.9828.3193-.3602.9098-1.2486 1.2345-1.6065.3247-.358.5487-.6993.9145-.9157.3707-.2164.8024-.3246 1.295-.3246.1219 0 .2292.0083.3219.0249.0927.0167.1707.0389.2341.0666ZM75.1515 37.0189c-1.1515 0-1.9461-.1748-2.3656-.3913-.4194-.2219-.7877-.5327-1.1047-.9323-.317-.3995-.5658-.8712-.7462-1.415-.1756-.5494-.2634-1.1515-.2634-1.8064v-.3662c0-.6604.0853-1.2625.2561-1.8064.1755-.5493.4145-1.0238.7169-1.4234.3073-.4051.6609-.7158 1.0609-.9323.3999-.222.8291-.3329 1.2876-.3329.439 0 1.8413.0943 2.2071.283.3658.1831.6829.4439.9511.7824.2732.3386.4829.7437.6292 1.2154.1463.4717.1146 1.6759.1146 2.2475v.5244h-6.9674l.0073-.4495H77.5v-.1082c0-.6049-.0024-1.8424-.217-2.3474-.2146-.5106-.517-.9212-.9072-1.232-.3902-.3108-.8511-.4661-1.3827-.4661-.439 0-1.8389.1054-2.1998.3163-.3561.2109-.6634.5022-.9219.874-.2585.3663-.4584.7936-.5999 1.2819-.1366.4884-.2048 1.0128-.2048 1.5733v.3662c0 .5605.078 1.0849.2341 1.5733.1561.4883.3731.9184.6511 1.2902.278.3663.6024.6548.973.8657.3756.2053 1.7926.3746 2.2266.3746.4536 0 .8755-.086 1.2657-.258.3951-.1721.756-.4995 1.0828-.9823l.278.2248c-.1756.283-.3877.5355-.6365.7575-.2439.2164-.5316.3884-.8633.516-.3268.1221-.7023.1832-1.1267.1832ZM38.0755 52.4517c0-.2719-.0658-1.3707-.1975-1.6481-.1317-.2831-.3707-.5467-.717-.7908-.3463-.2442-.8462-.4468-1.4998-.6077-.4438-.111-.834-.2331-1.1706-.3662-.3316-.1332-.6096-.2914-.834-.4745-.2244-.1887-.3926-.4162-.5048-.6826-.1122-.2664-.1683-.5827-.1683-.9489 0-.3164.2035-1.3197.3951-1.7647.278-.6459.2756-.6604.5048-.8657.2292-.2109.5073-.3746.834-.4912.3268-.1165.6975-.1748 1.1121-.1748.5901 0 1.095.1082 1.5144.3247.4243.2164.7487.5188.973.9073.2293.3829.3439.8296.3439 1.3402h-.4024c0-.3718-.0951-.7187-.2853-1.0405-.1853-.3219-.4585-.5827-.8194-.7825-.3609-.1998-.8023-.2997-1.3242-.2997-.5317 0-.9633.0916-1.295.2747-.3316.1831-.5755.4134-.7316.6909-.1512.2775-.4243 1.5816-.4243 1.8646 0 .2331.0293.4495.0878.6493.0585.1942.1707.3774.3365.5494.1707.1665.4146.3246.7316.4745.3171.1498.7316.2913 1.2438.4245.6292.1609 1.1413.3551 1.5363.5827.3951.2275.6853.5077.8707.8407.1902.3274.2853.727.2853 1.1987 0 .3496-.0659 1.4928-.1975 1.7813-.1269.2886-.3122.5383-.5561.7492-.239.2109-.5316.3746-.8779.4911-.3414.111-.7243.1665-1.1486.1665-.639 0-1.1804-.111-1.6242-.333-.439-.2275-.7731-.5272-1.0023-.899-.2244-.3773-.3365-.7852-.3365-1.2236h.395c.0342.5161.1829.9212.4463 1.2153.2683.2886.5926.4939.9731.616.3853.1165.7681.1748 1.1486.1748.5219 0 .9584-.0943 1.3096-.283.356-.1887.6243-.4301.8047-.7242.1805-.2997.2707-.6049.2707-.9157ZM48.6224 52.1437l-.0878-6.1603c0-.4995-.0951-.9268-.2853-1.282-.1854-.3551-.4585-.627-.8194-.8157-.3561-.1887-.7926-.283-1.3096-.283-.478 0-.9097.0971-1.295.2913-.3804.1887-.6828.4495-.9072.7825-.2194.3329-.3292.7075-.3292 1.1237l-.3951-.0166c0-.3496.0708-.6826.2122-.9989.1463-.3163.3487-.5966.6073-.8407.2633-.2442.573-.4357.9291-.5744.3609-.1443.7535-.2164 1.1779-.2164.5511 0 1.0364.1054 1.4559.3163.4243.2109.756.5272.995.9489.239.4218.3585.949.3585 1.5816l.0878 6.0189c0 .3218.017.6465.0512.9739.039.3274.0902.5827.1536.7658L49.5 55h-.4313c-.0488-.2164-.3854-1.6437-.4097-1.9489-.0244-.3108-.0366-.6132-.0366-.9074Zm.1756-3.3379.0146.4578h-2.0631c-.5122 0-.9706.0583-1.3755.1748-.4048.111-.7486.2692-1.0315.4745-.2829.2053-.5.4495-.6512.7325-.1512.283-.2268.5966-.2268.9406 0 .3607.0854.6909.2561.9906.1756.2997.417.5383.7243.7159.3073.1775.6609.2663 1.0608.2663.5561 0 1.0487-.1026 1.4779-.308.4292-.2108.7926-.505 1.0901-.8823.2975-.3774.5243-.8241.6804-1.3402l.1756.4162c-.0927.3108-.2317.6188-.4171.924-.1804.2997-.4121.5743-.695.8241-.2829.2441-.617.4411-1.0023.591-.3804.1443-.817.2164-1.3096.2164-.4926 0-.9218-.1027-1.2876-.308-.3658-.2109-.6487-.4994-.8487-.8657-.1999-.3718-.2999-.7963-.2999-1.2736 0-.3995.0829-.7658.2487-1.0988.1659-.3385.4048-.6298.717-.874.317-.2497.7023-.4412 1.1559-.5743.4536-.1332.9658-.1998 1.5364-.1998h2.0705ZM55.5624 53.8335h-.3951V43.545c0-.5772.083-1.0627.2488-1.4568.1658-.3995.4024-.702.7097-.9073.3121-.2053.6828-.308 1.112-.308.1512 0 .3073.0111.4682.0333.161.0167.3171.0527.4683.1082l-.0586.4329c-.1365-.0444-.2658-.0749-.3877-.0916-.122-.0222-.2829-.0333-.4829-.0333-.3463 0-.6462.0888-.8999.2664-.2487.172-.4414.4245-.5779.7575-.1366.3274-.2049.727-.2049 1.1987v10.2885Zm2.0924-9.0066v.4578H53v-.5327l4.6548.0749ZM64.9607 54c-.4829 0-.9341-.1082-1.3535-.3246-.4195-.222-.7877-.5328-1.1047-.9323-.3171-.3996-.5658-.8713-.7463-1.4151-.1756-.5494-.2634-1.1515-.2634-1.8063v-.3663c0-.6604.0854-1.2625.2561-1.8063.1756-.5494.4146-1.0239.717-1.4235.3072-.4051.6609-.7158 1.0608-.9323.3999-.2219.8292-.3329 1.2876-.3329.439 0 .8414.0943 1.2072.283.3658.1831.6828.444.9511.7825.2731.3385.4828.7436.6292 1.2153.1463.4717.2194.9933.2194 1.5649v.5244h-6.0723v-.4495h5.6773v-.1082c0-.6049-.1073-1.1598-.3219-1.6648-.2146-.5105-.517-.9212-.9072-1.232-.3902-.3107-.8511-.4661-1.3828-.4661-.4389 0-.8389.1054-1.1998.3163-.3561.2109-.6633.5022-.9218.874-.2585.3663-.4585.7936-.5999 1.2819-.1366.4884-.2049 1.0128-.2049 1.5733v.3663c0 .5604.078 1.0849.2341 1.5732.1561.4884.3731.9184.6511 1.2902.2781.3663.6024.6549.9731.8657.3755.2054.7804.308 1.2145.308.4536 0 .8754-.086 1.2656-.258.3951-.172.756-.4995 1.0828-.9823l.278.2248c-.1756.283-.3877.5355-.6365.7575-.2438.2164-.5316.3884-.8633.5161-.3268.1221-.7023.1831-1.1266.1831Z"
      />
      <g ref="group" />
    </svg>
  </div>
</template>

<script setup>
import { ref, reactive, onMounted, watch } from "vue";
import Squiggly from "@/components/Squiggly";
import gsap from "gsap";

const wordRef = ref();
const group = ref();
const temp = ref(0);

let delay = 0;
const wordAni = gsap.timeline({ paused: true });

const mouse = reactive({
  x: -100,
  y: -100,
});

const onMouseMove = (e) => {
  mouse.x = e.pageX - window.innerWidth / 2;
  mouse.y = e.pageY - window.innerHeight / 2;

  const imgX = mouse.x / window.innerWidth;
  const imgY = mouse.y / window.innerHeight;
  temp.value = Math.max(Math.abs(imgX), Math.abs(imgY));

  temp.value = Math.round(temp.value * 100) * 0.02;
};

const onTouchMove = (e) => {
  mouse.x = e.touches[0].pageX - window.innerWidth / 2;
  mouse.y = e.touches[0].pageY - window.innerHeight / 2;

  const imgX = mouse.x / window.innerWidth;
  const imgY = mouse.y / window.innerHeight;
  temp.value = Math.max(Math.abs(imgX), Math.abs(imgY));

  temp.value = Math.round(temp.value * 100) * 0.02;
};

watch(temp, () => {
  if (temp.value > 0.3) {
    wordAni.progress(Math.pow((temp.value - 0.3) / 0.6, 2));
  }
});

onMounted(() => {
  const items = document.querySelectorAll(".word > path");
  items.forEach((item) => {
    const length = item.getTotalLength();
    for (let i = 0; i < length; i++) {
      const pointLength = Math.random() * length;
      const point = item.getPointAtLength(pointLength);
      const circle = document.createElementNS(
        "http://www.w3.org/2000/svg",
        "circle"
      );
      circle.setAttribute("cx", point.x);
      circle.setAttribute("cy", point.y);
      circle.setAttribute("r", Math.random() * 0.75 + 0.5);
      circle.setAttribute("fill", "white");
      group.value.appendChild(circle);

      wordAni.to(
        circle,
        {
          cx: point.x + (Math.random() - 0.5) * 50,
          cy: point.y + (Math.random() - 0.5) * 50,
          opacity: 0,
          delay: (delay + pointLength) * 0.001,
        },
        0
      );
    }
  });
});
</script>

<style lang="scss" scoped>
.container {
  width: 100%;
  height: calc(var(--vh) * 100);
  background: rgb(22, 22, 22);
  .word {
    position: relative;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    animation: squiggly 0.5s linear infinite;
    path {
      opacity: 0;
    }
  }
}

@keyframes squiggly {
  0% {
    filter: url("#squiggly1");
  }
  25% {
    filter: url("#squiggly2");
  }
  50% {
    filter: url("#squiggly3");
  }
  75% {
    filter: url("#squiggly4");
  }
  100% {
    filter: url("#squiggly5");
  }
}
</style>
